/*! UX Rocket Modal 
 *  Modal Plugin 
 *  @author Bilal Cinarli <bcinarli@gmail.com> (http://bcinarli.com/) 
 *  @version 1.6.10 
 *  @build Thu Sep 20 2018 13:56:14 GMT+0300 (+03) 
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports&&"function"==typeof require?jQuery:jQuery)}(function(t){var e,n="uxrModal",s=1,o='<div id="uxr-modal-overlay"></div>',i='<div id="{{id}}" class="{{container}} {{loading}} {{className}}">    <div class="{{drag}} {{#if draggable}} {{hide}} {{/if}}"></div>     {{#if title}}         <h2 class="{{titleClass}}">{{title}}</h2>     {{/if}}    <div class="{{content}}">        <div class="{{loadedContent}}"></div>    </div>    <a href="#" class="{{close}} {{hide}}"></a></div>',a={},c={className:"",href:"",width:"",height:"",maxWidth:"",maxHeight:"",title:"",appendTo:"body",allowMultiple:!1,blockUI:!0,overlayClose:!0,close:!0,iframe:!1,html:!1,fixed:!1,draggable:!1,onReady:!1,onOpen:!1,onStart:!1,onLoad:!1,onClose:!1,onRemove:!1},l={click:"click."+n,wresize:"resize."+n,touchstart:"touchstart."+n,touchmove:"touchmove."+n,touchend:"touchend."+n,mousedown:"mousedown."+n,mousemove:"mousemove."+n,mouseup:"mouseup."+n,open:"uxropen."+n,start:"uxrstart."+n,load:"uxrload."+n,close:"uxrclose."+n,ready:"uxrready."+n,resize:"uxrresize."+n,remove:"uxrremove."+n},r={prefix:"uxr-",rocket:"uxRocket",data:n,name:"modal",classes:{ready:"ready",overlay:"overlay",container:"container",drag:"drag",content:"content",title:"title",loadedContent:"loaded-content",loading:"loading",close:"close",hide:"hide"}},h=new uxrPluginUtils({ns:r}),d=function(e,o,i){this._name=n,this._defaults=c,this._instance=s,this._direct=!1,null===e&&(e=document.createElement("a"),this._direct=!0),this.el=e,this.$el=t(e),this.$content=null,this.options=t.extend(!0,{},c,o,this.$el.data()),this.href=this.options.href||this.$el.attr("href")||!1,this.selector=i,s++,this.init()};d.prototype.init=function(){var t=this.$el.data(r.rocket)||{};t[r.data]={hasWrapper:!1,ready:h.getClassname("ready"),selector:this.selector,options:this.options},this.$el.data(r.rocket,t),this.bindUIActions(),this.$el.addClass(h.getClassname("ready")),this.emitEvent("ready"),this._direct===!0&&this.prepare()},d.prototype.bindUIActions=function(){var e,n=this;this.$el.on(l.click,function(t){t.preventDefault(),"undefined"==typeof a[n._instance]&&n.prepare()}).on(l.ready,function(){n.onReady()}).on(l.open,function(){n.onOpen()}).on(l.start,function(){n.onStart()}).on(l.load,function(){n.onLoad()}).on(l.close,function(){n.onClose()}).on(l.remove,function(){n.onRemove()}),t("body").on(l.click+" "+l.touchstart,"#uxr-modal-instance-"+n._instance+" ."+h.getClassname("close"),function(t){t.preventDefault(),n.close()}).on(l.mousedown+" "+l.touchstart,"#uxr-modal-instance-"+n._instance+" ."+h.getClassname("drag"),function(t){t.preventDefault(),m.move.start(n,t)}),t(document).on(l.mousemove+" "+l.touchmove,function(t){e&&clearTimeout(e),e=setTimeout(function(){m.move.drag(t)},100)}).on(l.mouseup+" "+l.touchend,function(){m.move.stop()}),t(window).on(l.wresize,function(){void 0!==a[n._instance]})},d.prototype.unbindUIActions=function(){this.emitEvent("remove"),this.$el.off("."+n)},d.prototype.prepare=function(){var e={},n=t("#uxr-modal-overlay"),s={id:"uxr-modal-instance-"+this._instance,container:h.getClassname("container"),loading:h.getClassname("loading"),drag:h.getClassname("drag"),hide:h.getClassname("hide"),content:h.getClassname("content"),titleClass:h.getClassname("title"),loadedContent:h.getClassname("loadedContent"),close:h.getClassname("close"),title:!!this.options.title&&this.options.title,draggable:"true"!==this.options.draggable,className:this.options.className},a=h.render(i,s),c="body";this.emitEvent("start"),"body"!==this.options.appendTo&&(c=0===t(h.escapeSelector(this.options.appendTo)).length?"body":this.options.appendTo),!this.options.allowMultiple&&m.isOnlyInstance()&&m.closeInstance(),this.options.blockUI&&(0===n.length?t(h.escapeSelector(c)).append(o):n.removeClass(h.getClassname("hide"))),null===this.$content?(this.$content=t(a),this.options.fixed&&(e.position="fixed"),""!==this.options.maxWidth&&(e.maxWidth=this.options.maxWidth),""!==this.options.maxHeight&&(e.maxHeight=this.options.maxHeight),Object.keys(e).length>0&&this.$content.css(e),t(h.escapeSelector(c)).append(this.$content)):this.$content.removeClass(h.getClassname("hide")),this.$content.addClass(h.getClassname("loading")).find("."+h.getClassname("loadedContent")).html(""),m.registerInstance(this),this.open()},d.prototype.open=function(){this.emitEvent("open"),this.get()},d.prototype.get=function(){var e,n=this;this.options.iframe?(this.options.width=this.options.width||800,this.options.height=this.options.height||600,e='<iframe src="'+this.href+'" frameborder="0" width="100%" height="100%"></iframe>',this.html=e,n.emitEvent("load")):this.isInpage()?this.href!==!1?(this.$target=t(h.escapeSelector(this.href)),this.$ph=t('<div id="uxr-modal-placeholder-'+this._instance+'" class="'+h.getClassname("hide")+'">').insertBefore(this.$target),this.html=this.$target,n.emitEvent("load")):(this.html=this.options.html,n.emitEvent("load")):t.get(this.href).done(function(t){n.html=t,setTimeout(function(){n.emitEvent("load")})})},d.prototype.load=function(){var t=this.$content.find("."+h.getClassname("loadedContent"));t.html(""),this.$content.removeClass(h.getClassname("loading")),this.options.close&&this.$content.find("."+h.getClassname("close")).removeClass(h.getClassname("hide")),this.options.allowMultiple&&this.$content.find("."+h.getClassname("drag")).removeClass(h.getClassname("hide")),t.append(this.html),this.resize()},d.prototype.close=function(){m.isOnlyInstance()&&t("#uxr-modal-overlay").addClass(h.getClassname("hide")),this.$content.addClass(h.getClassname("hide")).find("."+h.getClassname("close")).addClass(h.getClassname("hide")),this.$content.find("#uxr-notifications").remove(),m.close(this),this.$ph&&(this.$ph.replaceWith(this.$target),delete this.$ph,delete this.$target),this._direct&&this.removeContent(),this.emitEvent("close")},d.prototype.resize=function(){var t,e,n,s={},o=this.$content.find("."+h.getClassname("content")),i=this.$content.find("."+h.getClassname("loadedContent"));o.height("auto"),t=this.$content.height(),""!==this.options.width&&(s.width=this.options.width),""!==this.options.height&&(s.height=this.options.height),i.css(s),e=i.css("position","absolute").width(),n=i.height(),i.css("position","relative"),t<n&&o.width()<e?(o.height(t),o.css("overflow","scroll")):t<n?(o.height(t),o.css("overflowY","scroll")):o.width()<e&&o.css("overflowX","scroll"),this.emitEvent("resize")},d.prototype.isInpage=function(){if("undefined"==typeof this.inpage)if(this.inpage=!1,this.href===!1)this.inpage=!0;else if("#"===this.href.charAt(0))this.inpage=!0;else{var t=window.location.href.replace(location.hash,"").replace(location.protocol,""),e=this.href.replace(location.hash,"").replace(location.protocol,"");t===e&&(this.inpage=!0)}return this.inpage},d.prototype.remove=function(){this.removeClasses(),this.removeContent(),this.unbindUIActions(),this.removeInstance()},d.prototype.removeClasses=function(){this.$el.removeClass(h.getClassname("ready"))},d.prototype.removeContent=function(){null!==this.$content&&this.$content.remove()},d.prototype.removeInstance=function(){delete this.$el.data()[r.data],delete this.$el.data(r.rocket)[r.data]},d.prototype.onReady=function(){h.callback(this.options.onReady)},d.prototype.onOpen=function(){h.callback(this.options.onOpen)},d.prototype.onStart=function(){h.callback(this.options.onStart)},d.prototype.onLoad=function(){this.load(),h.callback(this.options.onLoad)},d.prototype.onClose=function(){h.callback(this.options.onClose)},d.prototype.onRemove=function(){h.callback(this.options.onRemove)},d.prototype.emitEvent=function(e){this.$el.trigger(l[e]),this._direct&&t(document).trigger(l[e])},d.prototype.getOpenedInstances=function(){return a};var p,u=function(){var e=t("#uxr-modal-overlay"),n=Number(a.lastInstance.$content[0].style.zIndex)-1;e.css("z-index",n)},m={setModalZIndex:function(t,e){var n=Number(t.$content.css("z-index"))||1e4;console.warn("defaultZIndex",n);var s=Object.keys(a).length;if(e)var o=n-2*s;else var o=n+2*s;t.$content.css("z-index",o),console.warn("instance",t.$content.css("z-index"),t)},registerInstance:function(t){console.warn("instance",t),a[t._instance]=t,t.previousInstance=m.isOnlyInstance()?t:a.lastInstance||t,a.lastInstance=t,this.setModalZIndex(t,!1),u()},close:function(t){a.lastInstance=t.previousInstance,delete a[t._instance],this.setModalZIndex(t,!0),u()},closeFromOverlay:function(){a.lastInstance.options.overlayClose&&this.closeInstance()},closeInstance:function(){this.hasInstances()&&a.lastInstance.close()},hasInstances:function(){return Object.keys(a).length>1},isOnlyInstance:function(){return Object.keys(a).length-1===1},move:{pos:{},selected:!1,previous:!1,start:function(t,e){var n=this.pointer(e);this.selected=t,p=this.selected.$content.css("zIndex"),this.selected.$content.css("zIndex",20001),this.pos.top=n.y-this.selected.$content[0].offsetTop,this.pos.left=n.x-this.selected.$content[0].offsetLeft,this.previous?this.previous.$content.css("zIndex",this.previous.$content.css("zIndex")||1e3):this.previous=t},drag:function(e){var n=this.pointer(e),s=t(window).scrollTop();this.selected&&(this.selected.$content[0].style.top=n.y-s+this.selected.$content.height()/2+"px",this.selected.$content[0].style.left=n.x+"px")},stop:function(){this.selected&&(this.selected.$content.css("zIndex",p),this.previous=this.selected,this.selected=!1)},pointer:function(t){var e={x:0,y:0};if("touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type||"touchcancel"===t.type){var n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e.x=n.pageX,e.y=n.pageY}else"mousedown"!==t.type&&"mouseup"!==t.type&&"mousemove"!==t.type&&"mouseover"!==t.type&&"mouseout"!==t.type&&"mouseenter"!==t.type&&"mouseleave"!==t.type||(e.x=t.pageX,e.y=t.pageY);return e}}};t(function(){t("body").on(l.click+" "+l.touchstart,"#uxr-modal-overlay",function(){m.closeFromOverlay()})}),e=t.fn.modal=t.fn.uxrmodal=t.uxrmodal=function(e){var n=this.selector;return"function"==typeof this?new d(null,e,null):this.each(function(){t.data(this,r.data)||t.data(this,r.data,new d(this,e,n))})},e.remove=function(e){var n=t("undefined"==typeof e?"."+h.getClassname("ready"):e);n.length&&n.each(function(){var e=t(this).data(r.data);e&&e.remove()})},e.resize=function(){var t=a.lastInstance;m.hasInstances()&&t.resize()},e.close=function(){var t=a.lastInstance;m.hasInstances()&&t.close()},e.getInstances=function(){return a},e.version="1.6.10",e.settings=c});